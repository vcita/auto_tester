# Delete Service Function - Detailed Script

> **Status**: Generated from exploration
> **Last Updated**: 2026-01-23
> **Generated By**: Cursor AI exploration with Playwright MCP

## Parameters

- **name** (required): Name of the service to delete

## Initial State

- User is logged in
- Browser can be on any page

## Actions

### Step 1: Navigate to Settings

- **Action**: Click
- **Target**: Settings menu item in sidebar

**LOCATOR DECISION:**

| Option | Pros | Cons |
|--------|------|------|
| `page.get_by_text('Settings')` | Simple, unique text | None |

**CHOSEN**: `page.get_by_text('Settings')` - Unique and simple.

**VERIFIED PLAYWRIGHT CODE**:
```python
page.get_by_text('Settings').click()
page.wait_for_url("**/app/settings", timeout=10000)
```

- **How verified**: Clicked in MCP, navigated to Settings page
- **Wait for**: URL contains "/app/settings"

### Step 2: Click Services button

- **Action**: Click
- **Target**: Services section button in Settings

**VERIFIED PLAYWRIGHT CODE**:
```python
page.wait_for_selector('iframe[title="angularjs"]', timeout=10000)
iframe = page.frame_locator('iframe[title="angularjs"]')
iframe.get_by_role('button', name='Define the services your').click()
page.wait_for_url("**/app/settings/services", timeout=10000)
```

- **How verified**: Clicked in MCP, navigated to Services page
- **Wait for**: URL contains "/app/settings/services"

### Step 3: Click on Service in List

- **Action**: Click
- **Target**: Service button matching the name

**LOCATOR DECISION:**

| Option | Pros | Cons |
|--------|------|------|
| `iframe.get_by_role('button').filter(has_text=name)` | Dynamic, matches by name | None |
| `iframe.get_by_role('button', name=f'icon-twousers {name}')` | Full accessible name | Too specific |

**CHOSEN**: `iframe.get_by_role('button').filter(has_text=name)` - Flexible matching.

**VERIFIED PLAYWRIGHT CODE**:
```python
service_in_list = iframe.get_by_role('button').filter(has_text=name)
service_in_list.wait_for(state='visible', timeout=10000)
service_in_list.click()
page.wait_for_url("**/app/settings/services/**", timeout=10000)
```

- **How verified**: Clicked in MCP, navigated to service edit page
- **Wait for**: URL contains service ID

### Step 4: Click Delete Button

- **Action**: Click
- **Target**: Delete button in service edit page

**LOCATOR DECISION:**

| Option | Pros | Cons |
|--------|------|------|
| `iframe.get_by_role('button', name='Delete')` | Unique, semantic | None |

**CHOSEN**: `iframe.get_by_role('button', name='Delete')` - Unique button.

**VERIFIED PLAYWRIGHT CODE**:
```python
delete_btn = iframe.get_by_role('button', name='Delete')
delete_btn.click()
dialog = iframe.get_by_role('dialog')
dialog.wait_for(state='visible', timeout=5000)
```

- **How verified**: Clicked in MCP, confirmation dialog appeared
- **Wait for**: Dialog becomes visible

### Step 5: Confirm Deletion

- **Action**: Click
- **Target**: "Ok" button in confirmation dialog

**LOCATOR DECISION:**

| Option | Pros | Cons |
|--------|------|------|
| `iframe.get_by_role('button', name='Ok')` | Unique in dialog | None |
| `iframe.get_by_text('Ok')` | Simple | May match other elements |

**CHOSEN**: `iframe.get_by_role('button', name='Ok')` - Unique in dialog context.

**VERIFIED PLAYWRIGHT CODE**:
```python
ok_btn = iframe.get_by_role('button', name='Ok')
ok_btn.click()
page.wait_for_url("**/app/settings/services", timeout=10000)
```

- **How verified**: Clicked in MCP, redirected to Services list
- **Wait for**: URL is Services list (no service ID)

### Step 6: Verify Service Removed

- **Action**: Verify
- **Target**: Service should not be in list

**VERIFIED PLAYWRIGHT CODE**:
```python
services_heading = iframe.get_by_role('heading', name='Settings / Services')
services_heading.wait_for(state='visible', timeout=10000)

# Verify service is no longer in the list
service_in_list = iframe.get_by_role('button').filter(has_text=name)
expect(service_in_list).to_have_count(0)
```

- **How verified**: Service was not found in list after deletion
- **Wait for**: Services heading visible, service count is 0

## Success Verification

- Service no longer appears in the services list
- Redirected back to Services list page
